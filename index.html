<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="apple-touch-icon" sizes="180x180" href="./assets/apple-touch-icon.png">
  <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png">
  <link rel="manifest" href="./assets/site.webmanifest">

  <link rel="stylesheet" href="./style.css">

  <title>Rush Berlin</title>
</head>

<body>

  <nav>
    <h1>
      <a href="/">
        <img src="./assets/logo.png" alt="Rush Logo" height="100px">
      </a>
    </h1>
  </nav>

  <main>
    <section>
      <ul>
        <li id="livestream" hidden>
          <a href="https://rush.berlin/live">
            Watch the <b>Rush Livestream</b>
            <div class="live-indicator-holder">
              <span class="indicator">
                <div class="circle blink" aria-hidden="true"></div>streaming
              </span>
            </div>
          </a>
        </li>
        <li>
          <a href="https://instagram.com/rush_berlin" target="_blank">Follow <b>@rush_berlin</b> on Instagram</a>
        </li>
        <li>
          <a href="https://www.youtube.com/@rush.berlin" target="_blank">Stream <b>@rush.berlin</b> on YouTube</a>
        </li>
      </ul>
    </section>
  </main>

  <script src="/scripts/fetch-with-timeout.js"></script>
  <script>
    fetchWithTimeout('https://stream.rush.berlin/api/v0.2/streams/', 4000)
      .then(res => res.json())
      .then(out => {
        for (let stream of out.streams) {
          if (stream.name === 'stream' && stream.app === 'live') {
            document.getElementById('livestream').hidden = false;
          }
        }
      })
      .catch(err => { console.error(err) });
  </script>

  <script src="/scripts/redirect.js"></script>

</body>

</html>